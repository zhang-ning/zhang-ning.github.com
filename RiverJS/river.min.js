var _$river={sandbox:function(){var e={};return{create:function(n,t){n=n.toLowerCase(),e[n]=t},run:function(n){var t={need:function(n){return n=n.toLowerCase(),e[n]&&e[n].call(t)||void 0}};n.call(t)}}}};_$river.module=_$river.sandbox();var define=_$river.module.create,main=_$river.module.run;main(function(){function e(e){if(!t[e]){var n=r.need("river.grammer."+e);n&&(t[e]=n)}}function n(r){var c=!1;if(r.attributes&&r.attributes.length&&Array.prototype.forEach.call(r.attributes,function(n){var s=n.nodeName,u=n.nodeValue.replace(o,"");if("repeat"===s&&(c=!0),"scope"===s&&(a=u,i[a]={scope:{},node:{},eom:{},reg:o}),e(s),a&&t[s]&&(i[a].node=r,t[s].call(i[a],u)),o.test(n.nodeValue)){var l=n.nodeValue.replace(o,"");i[a].eom[l]||(i[a].eom[l]=[]),i[a].eom[l].push({element:n,expression:n.nodeValue}),n.nodeValue=n.nodeValue.replace(/{{.*}}/,i[a].scope[l])}}),o.test(r.nodeValue)){var s=r.nodeValue.replace(o,"");i[a].eom[s]||(i[a].eom[s]=[]),i[a].eom[s].push({element:r,expression:r.nodeValue}),r.nodeValue=r.nodeValue.replace(/{{.*}}/,i[a].scope[s])}"CODE"!==r.nodeName&&"PRE"!==r.nodeName&&r.childNodes&&r.childNodes.length&&!c&&Array.prototype.forEach.call(r.childNodes,function(e){n(e)})}var t={},r=this,o=/.*{{\s*|\s*}}.*/g,i={},a="river.rootscope";i[a]={eom:{},reg:o},document.addEventListener("DOMContentLoaded",function(){var e=r.need("river.core.model");i[a].scope=new e(a,i[a].eom),n(document)})}),define("river.core.Date",function(){function e(e){var n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in n)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[t]:("00"+n[t]).substr((""+n[t]).length)));return e}var n=function(n){var t=new Date,r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()+parseInt(n),t.getUTCMinutes(),t.getUTCSeconds());return{date:r,toString:function(n){return r.toString=e,r.toString(n)}}};return{getDateByCity:n}}),define("river.core.model",function(){function e(n,t,r){c(n)||s(n)?l(r[t],function(e){e.element.nodeValue=e.expression.replace(/{{.*}}/,n)}):i(n)?l(n,function(n,o){e(n,o,r[t][o])}):a(n)&&u(n,function(n,t){e(n,t,r)})}function n(e,n,t){r[e]=n,o[e]={},this.$$ns=e;for(var i in t)this[i]=t[i],last[i]=t[i]}var t=this.need("river.core.tools"),r={},o={},i=t.isArray,a=t.isObject,c=t.isString,s=t.isNumber,u=t.each,l=t.loop;return n.prototype.apply=function(){var n=r[this.$$ns],t=o[this.$$ns];u(this,function(r,o){n[o]&&t[o]!==r&&(e(r,o,n),t[o]=r)})},n.prototype.watch=function(){},n.prototype.inject=function(e){var n=this;u(e,function(t,r){n[r]=e[r]})},n}),define("river.core.tools",function(){var e={loop:function(e,n){for(var t={},r=0;r<e.length;r++)n.call(t,e[r],r)},each:function(e,n){var t={};for(var r in e)e.hasOwnProperty&&e.hasOwnProperty(r)&&n.call(t,e[r],r)},log:function(){console&&Function.apply.call(console.log,console,arguments)},isArray:function(e){return"[object Array]"===toString.apply(e)},isObject:function(e){return null!==e&&"object"==typeof e},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}};return e}),define("river.grammer.jbind",function(){function e(e){var n=this.scope;this.node.value=n[e],this.node.onkeyup=function(){n[e]=this.value,n.apply()}}return e}),define("river.grammer.jChange",function(){function e(e){var n=this.scope[e],t=this.scope;this.node.onchange=function(){n.call({},this.value),t.apply()}}return e}),define("river.grammer.jclick",function(){function e(e){var n=e.replace(/\(.*\)/,""),t=this.scope[n],r=this.scope,o=/\((.*)\)/,i=e.match(o),a=[];i&&i.length&&(a=i[1].split(",")),this.node.onclick=function(){t.apply({},a),r.apply()}}return e}),define("river.grammer.repeat",function(){function e(e){var t=/.*in\s/,r=/\sin.*/,o=/.*\./,i=e.replace(t,"").replace(o,""),a=this.scope[i],c=e.replace(r,""),s=this.node.parentNode,u=s.removeChild(this.node),l=document.createDocumentFragment(),p=this.reg,d=this.eom[i]=[];u.removeAttribute("repeat"),a&&a.length&&(a.forEach(function(e){var t=u.cloneNode(!0),r={};n(p,t,e,c,r),d.push(r),l.appendChild(t)}),s.appendChild(l))}function n(r,o,i,a,c){var s=!1;if(o.attributes&&o.attributes.length&&Array.prototype.forEach.call(o.attributes,function(n){if(r.test(n.nodeValue)){var u=n.nodeValue.replace(r,"").replace(a+".","");c[u]||(c[u]=[]),c[u].push({element:n,expression:n.nodeValue}),n.nodeValue=n.nodeValue.replace(/{{.*}}/,i[u])}"repeat"===n.nodeName&&(s=!0,t.node=o,t.scope=i,t.reg=r,t.eom=c,e.call(t,n.nodeValue.replace(r,"")))}),r.test(o.nodeValue)){var u=o.nodeValue.replace(r,"").replace(a+".","");c[u]||(c[u]=[]),c[u].push({element:o,expression:o.nodeValue}),o.nodeValue=o.nodeValue.replace(/{{.*}}/,i[u])}o.childNodes&&o.childNodes.length&&!s&&Array.prototype.forEach.call(o.childNodes,function(e){n(r,e,i,a,c)})}var t={};return e}),define("river.grammer.scope",function(){function e(e){this.node.removeAttribute("scope");var o=n.need(e);if(r.isObject(o))this.scope=o;else if(r.isFunction(o)){var i=new t(e,this.eom);this.scope=i,o.call(i)}}var n=this,t=n.need("river.core.model"),r=n.need("river.core.tools");return e});
//# sourceMappingURL=river.map