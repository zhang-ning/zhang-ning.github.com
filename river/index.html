<html>
<head>
<title>Demos</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<link rel="stylesheet" type="text/css" href="canvas/style.css" title="Texts on Canvas Styles"/>
<link rel="stylesheet" type="text/css" href="cube/cube.css">
<link rel="stylesheet" type="text/css" href="card.css">
<link rel="stylesheet" type="text/css" href="riverstudio.css">
<style type="text/css">
	line.back{
		stroke-dasharray: 5 2;
	}  
	polygon.cube-polygon{
	    fill-opacity: 0.8;
	}
	.center-block{
		display: inline-block; 
		border: 0px solid green; 
		text-align: left;
	}
	.title{
		margin: 10px 0px;
	}
	.demo-board{
		position: relative;
		display: inline-block;
	}
	#sort_num,
	#sort_speed,
	#hanoi_num,
	#hanoi_speed{
		width: 50px;
	}
</style>
<script type="text/javascript" src="tools/drawer.js"></script>
<script type="text/javascript" src="canvas/painter.js"></script>
<script type="text/javascript" src="canvas/liner.js"></script>
<script type="text/javascript" src="canvas/painter-defaults.js"></script>
<script type="text/javascript" src="cube/cube.js"></script>
<script type="text/javascript" src="swimRing/river-utils.js"></script>
<script type="text/javascript" src="swimRing/swimRingChart.js"></script>
<script type="text/javascript" src="tip/tip.js"></script>
<script type="text/javascript" src="tip/pears.js"></script>
<script type="text/javascript" src="alg/sort.js"></script>
<script type="text/javascript" src="alg/virtualizeSortAlg.js"></script>
<script type="text/javascript" src="alg/mergeSort.js"></script>
<script type="text/javascript" src="hanoi/hanoi.js"></script>
<script type="text/javascript" src="two-way-binding/twowaybinding.js"></script>
<script type="text/javascript">
	var boardWidth = 800;
	function detectWindow(){
		var innerWidth = window.innerWidth;
		console.log(innerWidth);
		if(innerWidth < boardWidth + 50 * 2){
			boardWidth = innerWidth - 50 * 2;
		}
		console.log(boardWidth);
		var cards = document.querySelectorAll(".demo-board");
		var boards = document.querySelectorAll(".demo-board");
		for(var i = boards.length - 1; i >= 0; i--){
			var card = cards[i];
			var cstyle = Utils.getStyle(card);
			var cardW = Utils.getPxNum(cstyle.getPropertyValue("width"));
			var cardH = Utils.getPxNum(cstyle.getPropertyValue("height"));
			console.log(cardW, cardH);
			if(boards[i].tagName.toUpperCase() === "SVG"){
				boards[i].setAttribute("width", cardW);
				boards[i].setAttribute("height", cardH);
			}else if(boards[i].tagName.toUpperCase() === "CANVAS"){//
				boards[i].setAttribute("width", cardW + "px");
				boards[i].setAttribute("height", cardH + "px");
			}else{
				boards[i].style.width = cardW + "px";
				boards[i].style.height = cardH + "px";
			}
		}
		//TBD River
		var demoHanoi_svg_w = parseInt( document.getElementById("demoHanoi_svg").getAttribute("width") );
		console.log("demoHanoi_svg_w", demoHanoi_svg_w, boardWidth);
		if(boardWidth < demoHanoi_svg_w){
			document.getElementById("demoHanoi_svg").setAttribute("width", boardWidth);
		}
	}

	function demos() {
		detectWindow();

		demoPainter(); 
		demoLiner(); 
		demoCube(); 
		demoSwimRing(groups1);
		demoTwowaybinding(default_binding, document.getElementById('demoTwowaybindingDiv'));
		demoTip();
		sortPrepare();
		//startSort('quickSort');
		demoHanoi();
	}
</script>
</head>

<body onload="demos()" style="text-align: center;">
	<div class="host">
		<span>River Studio</span>
	</div>
<div class="cards main-div">
	<div id="painterDemoDiv" class="card ">
		<div >
			<canvas id="painterCanvas" class="demo-board"></canvas>
		</div>
		<div >
			<button onclick="painter.clear()">Clear</button>
			<button onclick="painter.replay(painter.traces, painter.durings)">Replay</button>
			<button onclick="painter.playDefaults()">Play Defaults</button>
			<button onclick="painter.reset()">Reset</button>
		</div>
	</div>

	<div id="linerDemoDiv" class="card ">
		<div>
			<select onchange="liner.switchMode(value);"  id="chooseMode" style="z-index: 10;">
				<option value="0">1 - 1</option>
				<option selected value="1">1 - N</option>
				<option value="2">N - 1</option>
				<option value="3">N - N</option>
			</select>
			<input id="test-in" ></input>
		</div>
		<div >
			<canvas id="linerCanvas" class="demo-board"></canvas>
		</div>
	</div>

	<div id="cubeDemoDiv" class="card">
		<svg id="cube_svg" class="demo-board">
		</svg>
		<div >
			<!--<select id="cube_type" onchange="cube.type = Number(this.value);" >
				<option value="0">In Aspect 0</option>
				<option value="1">In Aspect 1</option>
				<option value="2">In Line 0</option>
				<option value="3">In Line 1</option>
			</select>-->
			<button onclick="stopRotate()" >Stop</button>
			<!--<button onclick="drawer.clearSvg(svg); demoCube();" >Start</button>-->
			<button onclick="cube.rotateH(1)" style="vertical-align: top;">Horizontally</button>
			<button onclick="cube.rotateV(1)" style="vertical-align: top;">Vertically</button>
			<!--<button onclick="cube.stepH(10)" >Step Horizontally</button>
			<button onclick="cube.stepV(20)" >Step Vertically</button>-->
			<!--<button onclick="demoH()" style="vertical-align: top;">Demo H</button>
			<button onclick="demoV()" style="vertical-align: top;">Demo V</button>-->
			<!--<button onclick="cube.stepAlgH(30, svg) " >Alg H</button>
			<button onclick="cube.stepAlgV(15) " >Alg V</button>-->
		</div>
	</div>

	<div id="demoAlgDiv" class="card ">
		<svg id="demoAlg_svg" class="demo-board">
			<g id="main_g" ></g>
			<g id="temp_g" transform="translate(0,150)"></g>
		</svg>
		<div >
			<button onclick="startSort('quickSort');" class="sort-btn quickSort">Quick Sort</button>
			<button onclick="startSort('bubbleSort');" class="sort-btn bubbleSort">Bubble Sort</button>
			<button onclick="startSort('mergeSort');" class="sort-btn mergeSort">Merge Sort</button>
			<span >Num</span>
			<input type="text" value="30" id="sort_num"></input>
			<span>Speed</span>
			<input type="text" value="8" id="sort_speed"></input>
		</div>
	</div>

	<div id="demoHanoiDiv" class="card">
		<div class="demo-board" >
			<div >
				<svg id="demoHanoi_svg" class="demo-board">
				</svg>
				<div >
					<button onclick="demoHanoi();" id="hanoi-btn" >Start</button>
					<span >Num</span>
					<input type="text" value="3" id="hanoi_num"></input>
					<span>Speed</span>
					<input type="text" value="8" id="hanoi_speed" ></input>
				</div>
			</div>
			<div class="" style="overflow: auto; min-width: 100px; text-align: left;">
				<span>
					<a href="http://zh.wikipedia.org/wiki/%E6%B1%89%E8%AF%BA%E5%A1%94">汉诺塔</a><a href="http://en.wikipedia.org/wiki/Tower_of_Hanoi" style="margin-left: 10px;">Tower of Hanoi</a>
				</span>
				<ul>
					<li>每次只能移动一个盘子；</li>
					<li>只有最顶上的盘子可以移动；</li>
					<li>大的盘子不能放在小盘子上方；</li>
				</ul>
				<!--Each time move one dish;
				Only the uppermost dish on a stack can be moved;
				A bigger dish cannot be placed over a smaller one-->
				<div id="steps_desc">
					<ul>
						<li>移动n个盘子所需步骤是2<sup>n</sup>-1次</li>
						<li>3个盘子需要7步</li>
						<li>8个盘子需要255步</li>
						<li>10个盘子需要1023步</li>
						<li>15个盘子需要32767步</li>
						<li>20个盘子需要1048575步</li>
					</ul>
					<p>经过我在自己电脑的chrome浏览器中测试，我的浏览器只能最多承受23个盘子；</p>
					<p >当前所需步骤 <span id="hanoi_steps"></span></p>
				</div>
			</div>
		</div>
	</div>

	<div id="swimRingDemoDiv" class="card">
		<div id="swimRingDiv" >
		  <svg id="swimRing_svg" class="demo-board"></svg>
		  <select onchange="redemoSwimRing(value)" >
		    <option selected value="1">Grains</option>
		    <option value="2">Vegitables</option>
		    <option value="3">Fruits</option>
		  </select>
		</div>
	</div>

	<div id="demoTwowaybindingDiv" class="card">
		<div class="demo-board">
			<div class="center-block">
				<h4>River's Template Language engine (like AngularJS)</h4>
				<div>
				  <span>{{title}}</span>
				  <input value="{{ title }}"></input>
				</div>
				<ul repeat="{{season in seasons}}">
				  <li>
				    <div>
				      <span>{{season.title}}</span>
				      <input value="{{season.title}}"></input>
				    </div>
				    <ul>
				      <li repeat="{{feature in season.features}}">
				        <span>{{feature}}</span>
				        <input value="{{feature}}"></input>
				      </li>
				    </ul>
				  </li>
				</ul>
			</div>
			<area id="twowaybinding-code">
			</area>
		</div>
	</div>

	<div id="demoTipDiv" class="card">
		<svg id="demoTipSVG" class="demo-board">
			<g id="pearsG"></g>
			<!--<g id="tipG">-->
				<path id="tipPath" fill="white" stroke="brown" stroke-witdh="1"></path>
				<text id="tipText" text-anchor="middle" fill="gray"></text>
			<!--</g>-->
		</svg>
	</div>
</div>
</body>
</html>